<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="오타쿠 마켓 - 게임, 애니 피규어, 굿즈 전문 중고 거래 플랫폼">
  <title>오타쿠 마켓 | 게임·애니·피규어 전문 거래</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo" onclick="location.reload()">🎮 오타쿠 마켓</div>

      <div class="search-bar">
        <input type="text" class="search-input" placeholder="게임, 피규어, 굿즈를 검색하세요..." id="searchInput">
        <button class="search-btn" onclick="performSearch()">검색</button>
      </div>

      <div class="header-actions">
        <button class="theme-toggle" onclick="toggleTheme()" id="themeToggle" aria-label="테마 변경">🌙</button>
        <button class="btn btn-secondary" onclick="showLoginModal()">로그인</button>
        <button class="btn btn-primary" onclick="showSellModal()">판매하기</button>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-content">
      <div class="nav-item active" data-category="all">전체</div>
      <div class="nav-item" data-category="game">🎮 게임</div>
      <div class="nav-item" data-category="figure">🗿 피규어</div>
      <div class="nav-item" data-category="anime">📺 애니 굿즈</div>
      <div class="nav-item" data-category="manga">📚 만화책</div>
      <div class="nav-item" data-category="card">🃏 카드/TCG</div>
      <div class="nav-item" data-category="plush">🧸 인형/플러시</div>
      <div class="nav-item" data-category="merch">✨ 기타 굿즈</div>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <!-- Hero Section -->
    <section class="hero">
      <h1 class="hero-title">오타쿠를 위한<br>특별한 거래 공간</h1>
      <p class="hero-subtitle">게임, 애니메이션, 피규어 등 덕후 아이템 전문 중고 거래 플랫폼</p>

      <div class="stats">
        <div class="stat-item">
          <div class="stat-value" id="statProducts">0</div>
          <div class="stat-label">등록 상품</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="statUsers">0</div>
          <div class="stat-label">활성 유저</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="statTrades">0</div>
          <div class="stat-label">거래 완료</div>
        </div>
      </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
      <div class="filter-grid">
        <!-- Category Filter -->
        <div class="filter-group">
          <label class="filter-group-label">카테고리 (복수 선택)</label>
          <div class="multi-select-container" id="categoryChips">
            <div class="chip active" data-value="all">전체</div>
            <div class="chip" data-value="game">🎮 게임</div>
            <div class="chip" data-value="figure">🗿 피규어</div>
            <div class="chip" data-value="anime">📺 애니 굿즈</div>
            <div class="chip" data-value="manga">📚 만화책</div>
            <div class="chip" data-value="card">🃏 카드/TCG</div>
            <div class="chip" data-value="plush">🧸 인형/플러시</div>
            <div class="chip" data-value="merch">✨ 기타 굿즈</div>
          </div>
        </div>

        <!-- Condition Filter -->
        <div class="filter-group">
          <label class="filter-group-label">상품 상태 (복수 선택)</label>
          <div class="multi-select-container" id="conditionChips">
            <div class="chip active" data-value="all">전체</div>
            <div class="chip" data-value="new">✨ 미개봉 새상품</div>
            <div class="chip" data-value="like-new">👍 거의 새것</div>
            <div class="chip" data-value="good">🙂 양호</div>
            <div class="chip" data-value="fair">🛠 사용감 있음</div>
          </div>
        </div>

        <!-- Region Filter -->
        <div class="filter-group">
          <label class="filter-group-label">지역 (복수 선택)</label>
          <div class="multi-select-container" id="regionChips">
            <div class="chip active" data-value="all">전국</div>
            <div class="chip" data-value="seoul">서울</div>
            <div class="chip" data-value="gyeonggi">경기</div>
            <div class="chip" data-value="incheon">인천</div>
            <div class="chip" data-value="busan">부산</div>
            <div class="chip" data-value="daegu">대구</div>
            <div class="chip" data-value="other">기타</div>
          </div>
        </div>

        <!-- Price Range Filter -->
        <div class="filter-group">
          <label class="filter-group-label">가격 범위 (원)</label>
          <div class="price-range-inputs">
            <input type="number" class="price-input" id="minPrice" placeholder="최소 금액" min="0" step="1000">
            <span class="price-separator">~</span>
            <input type="number" class="price-input" id="maxPrice" placeholder="최대 금액" min="0" step="1000">
          </div>
          <button class="btn btn-secondary" style="width: 100%; margin-top: 16px; padding: 10px;"
            onclick="resetFilters()">필터 초기화</button>
        </div>
      </div>
    </section>

    <!-- Products Section -->
    <section>
      <div class="section-header">
        <h2 class="section-title">전체 상품</h2>
        <select class="sort-select" id="sortSelect">
          <option value="recent">최신순</option>
          <option value="low-price">낮은 가격순</option>
          <option value="high-price">높은 가격순</option>
          <option value="popular">인기순</option>
        </select>
      </div>

      <div class="product-grid" id="productGrid">
        <!-- Products will be dynamically inserted here -->
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <div class="footer-title">오타쿠 마켓</div>
        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
          게임, 애니메이션, 피규어를 사랑하는<br>
          모든 덕후들의 안전한 거래 공간
        </p>
      </div>

      <div class="footer-section">
        <div class="footer-title">서비스</div>
        <a href="#" class="footer-link">이용방법</a>
        <a href="#" class="footer-link">안전거래 가이드</a>
        <a href="#" class="footer-link">수수료 안내</a>
        <a href="#" class="footer-link">FAQ</a>
      </div>

      <div class="footer-section">
        <div class="footer-title">정책</div>
        <a href="#" class="footer-link">이용약관</a>
        <a href="#" class="footer-link">개인정보처리방침</a>
        <a href="#" class="footer-link">청소년보호정책</a>
        <a href="#" class="footer-link">위치기반서비스</a>
      </div>

      <div class="footer-section">
        <div class="footer-title">고객센터</div>
        <a href="#" class="footer-link">공지사항</a>
        <a href="#" class="footer-link">문의하기</a>
        <a href="#" class="footer-link">신고하기</a>
        <a href="#" class="footer-link">제휴문의</a>
      </div>
    </div>

    <div class="footer-bottom">
      © 2026 오타쿠 마켓. All rights reserved. Made with 💜 for otaku community
    </div>
  </footer>


  <!-- Login Modal -->
  <div class="modal" id="loginModal">
    <div class="modal-content" style="max-width: 450px;">
      <button class="modal-close" onclick="closeModal('loginModal')">×</button>

      <div class="modal-body">
        <h2 style="font-family: 'Poppins', sans-serif; font-size: 28px; margin-bottom: 8px; text-align: center;">로그인
        </h2>
        <p style="color: var(--text-secondary); text-align: center; margin-bottom: 32px;">오타쿠 마켓에 오신 것을 환영합니다!</p>

        <form id="loginForm" onsubmit="handleLogin(event)">
          <div class="form-group">
            <label class="form-label">이메일</label>
            <input type="email" class="form-input" id="loginEmail" placeholder="example@email.com" required>
          </div>

          <div class="form-group">
            <label class="form-label">비밀번호</label>
            <input type="password" class="form-input" id="loginPassword" placeholder="••••••••" required>
          </div>

          <button type="submit" class="btn btn-primary"
            style="width: 100%; margin-top: 24px; padding: 14px;">로그인</button>
        </form>

        <div style="display: flex; align-items: center; gap: 16px; margin: 24px 0;">
          <div style="flex: 1; height: 1px; background: var(--glass-border);"></div>
          <span style="color: var(--text-tertiary); font-size: 13px; font-weight: 500;">또는</span>
          <div style="flex: 1; height: 1px; background: var(--glass-border);"></div>
        </div>

        <div class="social-login-buttons">
          <button class="social-btn google-btn" onclick="handleSocialLogin('google')">
            <span class="social-icon">G</span>
            <span>구글로 시작하기</span>
          </button>
        </div>

        <div
          style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--glass-border);">
          <span style="color: var(--text-secondary); font-size: 14px;">계정이 없으신가요?</span>
          <button onclick="switchToSignup()"
            style="background: none; border: none; color: var(--primary-light); font-weight: 600; cursor: pointer; margin-left: 8px; font-size: 14px;">회원가입</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Signup Modal -->
  <div class="modal" id="signupModal">
    <div class="modal-content" style="max-width: 450px;">
      <button class="modal-close" onclick="closeModal('signupModal')">×</button>

      <div class="modal-body">
        <h2 style="font-family: 'Poppins', sans-serif; font-size: 28px; margin-bottom: 8px; text-align: center;">회원가입
        </h2>
        <p style="color: var(--text-secondary); text-align: center; margin-bottom: 32px;">오타쿠 마켓의 멤버가 되어보세요!</p>

        <form id="signupForm" onsubmit="handleSignup(event)">
          <div class="form-group">
            <label class="form-label">닉네임</label>
            <input type="text" class="form-input" id="signupNickname" placeholder="닉네임을 입력하세요" required>
          </div>

          <div class="form-group">
            <label class="form-label">이메일</label>
            <input type="email" class="form-input" id="signupEmail" placeholder="example@email.com" required>
          </div>

          <div class="form-group">
            <label class="form-label">비밀번호</label>
            <input type="password" class="form-input" id="signupPassword" placeholder="8자 이상 입력하세요" required
              minlength="8">
          </div>

          <div class="form-group">
            <label class="form-label">비밀번호 확인</label>
            <input type="password" class="form-input" id="signupPasswordConfirm" placeholder="비밀번호를 다시 입력하세요" required>
          </div>

          <div class="form-group">
            <label class="form-label">지역</label>
            <select class="form-input" id="signupRegion" required>
              <option value="">지역을 선택하세요</option>
              <option value="seoul">서울</option>
              <option value="gyeonggi">경기</option>
              <option value="incheon">인천</option>
              <option value="busan">부산</option>
              <option value="daegu">대구</option>
              <option value="other">기타</option>
            </select>
          </div>

          <button type="submit" class="btn btn-primary"
            style="width: 100%; margin-top: 24px; padding: 14px;">회원가입</button>
        </form>

        <div
          style="text-align: center; margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--glass-border);">
          <span style="color: var(--text-secondary); font-size: 14px;">이미 계정이 있으신가요?</span>
          <button onclick="switchToLogin()"
            style="background: none; border: none; color: var(--primary-light); font-weight: 600; cursor: pointer; margin-left: 8px; font-size: 14px;">로그인</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Sell Modal -->
  <div class="modal" id="sellModal">
    <div class="modal-content" style="max-width: 600px;">
      <button class="modal-close" onclick="closeModal('sellModal')">×</button>

      <div class="modal-body">
        <h2 style="font-family: 'Poppins', sans-serif; font-size: 28px; margin-bottom: 8px;">상품 등록</h2>
        <p style="color: var(--text-secondary); margin-bottom: 32px;">당신의 소중한 아이템을 판매해보세요!</p>

        <form id="sellForm" onsubmit="handleSellProduct(event)">
          <div class="form-group">
            <label class="form-label">상품명</label>
            <input type="text" class="form-input" id="sellTitle" placeholder="예: 젤다의 전설 티어스 오브 더 킹덤" required>
          </div>

          <div class="form-group">
            <label class="form-label">카테고리</label>
            <select class="form-input" id="sellCategory" required>
              <option value="">카테고리를 선택하세요</option>
              <option value="game">🎮 게임</option>
              <option value="figure">🗿 피규어</option>
              <option value="anime">📺 애니 굿즈</option>
              <option value="manga">📚 만화책</option>
              <option value="card">🃏 카드/TCG</option>
              <option value="plush">🧸 인형/플러시</option>
              <option value="merch">✨ 기타 굿즈</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">가격 (원)</label>
            <input type="number" class="form-input" id="sellPrice" placeholder="0" required min="0" step="1000">
          </div>

          <div class="form-group">
            <label class="form-label">상태</label>
            <select class="form-input" id="sellCondition" required>
              <option value="">상태를 선택하세요</option>
              <option value="new">미개봉 새상품</option>
              <option value="like-new">거의 새것</option>
              <option value="good">양호</option>
              <option value="fair">사용감 있음</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">거래 방법</label>
            <select class="form-input" id="sellTradeMethod" required>
              <option value="">거래 방법을 선택하세요</option>
              <option value="direct">🤝 직거래</option>
              <option value="shipping">📦 택배거래</option>
              <option value="both">🔄 직거래/택배 모두 가능</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">거래 희망 지역</label>
            <select class="form-input" id="sellRegion" required>
              <option value="">지역을 선택하세요</option>
              <option value="seoul">서울</option>
              <option value="gyeonggi">경기</option>
              <option value="incheon">인천</option>
              <option value="busan">부산</option>
              <option value="daegu">대구</option>
              <option value="gwangju">광주</option>
              <option value="daejeon">대전</option>
              <option value="ulsan">울산</option>
              <option value="sejong">세종</option>
              <option value="gangwon">강원</option>
              <option value="chungbuk">충북</option>
              <option value="chungnam">충남</option>
              <option value="jeonbuk">전북</option>
              <option value="jeonnam">전남</option>
              <option value="gyeongbuk">경북</option>
              <option value="gyeongnam">경남</option>
              <option value="jeju">제주</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">상품 설명</label>
            <textarea class="form-input" id="sellDescription" placeholder="상품에 대해 자세히 설명해주세요..." rows="4"
              required></textarea>
          </div>

          <button type="submit" class="btn btn-primary"
            style="width: 100%; margin-top: 24px; padding: 14px;">등록하기</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal" id="editModal">
    <div class="modal-content" style="max-width: 600px;">
      <button class="modal-close" onclick="closeModal('editModal')">×</button>

      <div class="modal-body">
        <h2 style="font-family: 'Poppins', sans-serif; font-size: 28px; margin-bottom: 8px;">상품 수정</h2>
        <p style="color: var(--text-secondary); margin-bottom: 32px;">상품 정보를 수정합니다.</p>

        <form id="editForm" onsubmit="handleEditProduct(event)">
          <input type="hidden" id="editProductId">
          <div class="form-group">
            <label class="form-label">상품명</label>
            <input type="text" class="form-input" id="editTitle" required>
          </div>

          <div class="form-group">
            <label class="form-label">카테고리</label>
            <select class="form-input" id="editCategory" required>
              <option value="">카테고리를 선택하세요</option>
              <option value="game">🎮 게임</option>
              <option value="figure">🗿 피규어</option>
              <option value="anime">📺 애니 굿즈</option>
              <option value="manga">📚 만화책</option>
              <option value="card">🃏 카드/TCG</option>
              <option value="plush">🧸 인형/플러시</option>
              <option value="merch">✨ 기타 굿즈</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">가격 (원)</label>
            <input type="number" class="form-input" id="editPrice" required min="0" step="1000">
          </div>

          <div class="form-group">
            <label class="form-label">상태</label>
            <select class="form-input" id="editCondition" required>
              <option value="">상태를 선택하세요</option>
              <option value="new">미개봉 새상품</option>
              <option value="like-new">거의 새것</option>
              <option value="good">양호</option>
              <option value="fair">사용감 있음</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">거래 방법</label>
            <select class="form-input" id="editTradeMethod" required>
              <option value="">거래 방법을 선택하세요</option>
              <option value="direct">🤝 직거래</option>
              <option value="shipping">📦 택배거래</option>
              <option value="both">🔄 직거래/택배 모두 가능</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">거래 희망 지역</label>
            <select class="form-input" id="editRegion" required>
              <option value="">지역을 선택하세요</option>
              <option value="seoul">서울</option>
              <option value="gyeonggi">경기</option>
              <option value="incheon">인천</option>
              <option value="busan">부산</option>
              <option value="daegu">대구</option>
              <option value="gwangju">광주</option>
              <option value="daejeon">대전</option>
              <option value="ulsan">울산</option>
              <option value="sejong">세종</option>
              <option value="gangwon">강원</option>
              <option value="chungbuk">충북</option>
              <option value="chungnam">충남</option>
              <option value="jeonbuk">전북</option>
              <option value="jeonnam">전남</option>
              <option value="gyeongbuk">경북</option>
              <option value="gyeongnam">경남</option>
              <option value="jeju">제주</option>
            </select>
          </div>

          <div class="form-group">
            <label class="form-label">상품 설명</label>
            <textarea class="form-input" id="editDescription" rows="4" required></textarea>
          </div>

          <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 24px; padding: 14px;">수정
            완료</button>
        </form>
      </div>
    </div>
  </div>
  <!-- Product Detail Modal -->
  <div class="modal" id="productModal">
    <div class="modal-content" style="max-width: 600px; padding: 24px;">
      <button class="modal-close" onclick="closeModal('productModal')">×</button>

      <div class="modal-body" style="text-align: left;">
        <!-- 이미지 -->
        <div style="text-align: center; margin-bottom: 20px; background: #f8fafc; border-radius: 12px; padding: 20px;">
          <img id="modalImage" src="" alt="상품 이미지" style="max-width: 100%; max-height: 300px; object-fit: contain;">
        </div>

        <!-- 카테고리 & 시간 -->
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span id="modalCategory"
            style="font-size: 13px; font-weight: 600; color: var(--primary-color); background: rgba(99, 102, 241, 0.1); padding: 4px 8px; border-radius: 4px;">CATEGORY</span>
          <span id="modalTime" style="font-size: 12px; color: var(--text-secondary);">방금 전</span>
        </div>

        <!-- 제목 -->
        <h2 id="modalTitle" style="font-size: 22px; font-weight: 700; margin-bottom: 8px;">상품 제목</h2>

        <!-- 가격 -->
        <div id="modalPrice"
          style="font-size: 28px; font-weight: 800; color: var(--primary-color); margin-bottom: 24px;">0원</div>

        <!-- 정보 박스 -->
        <div
          style="background: var(--surface-color); padding: 16px; border-radius: 12px; margin-bottom: 24px; border: 1px solid rgba(0,0,0,0.05);">
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div>
              <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">상태</div>
              <div id="modalCondition" style="font-weight: 600;">-</div>
            </div>
            <div>
              <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">거래 지역</div>
              <div id="modalLocation" style="font-weight: 600;">-</div>
            </div>
          </div>
          <div style="margin-top: 12px;">
            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">거래 방법</div>
            <div id="modalTradeMethod" style="font-weight: 600;">-</div>
          </div>
        </div>

        <!-- 설명 -->
        <div style="margin-bottom: 24px;">
          <h3 style="font-size: 15px; font-weight: 700; margin-bottom: 8px;">상품 설명</h3>
          <p id="modalDescription"
            style="line-height: 1.6; color: var(--text-secondary); white-space: pre-wrap; font-size: 14px;">-</p>
        </div>

        <!-- 판매자 정보 -->
        <div style="margin-bottom: 24px;">
          <h3 style="font-size: 15px; font-weight: 700; margin-bottom: 12px;">판매자 정보</h3>
          <div
            style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--surface-color); border-radius: 12px; border: 1px solid rgba(0,0,0,0.05);">
            <div id="modalSellerAvatar"
              style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #6366f1, #a855f7); display: flex; align-items: center; justify-content: center; font-size: 20px; color: white;">
              👤</div>
            <div>
              <div id="modalSeller" style="font-weight: 600; font-size: 15px;">판매자</div>
              <div style="font-size: 12px; color: var(--text-secondary);">매너온도 36.5°C 🔥</div>
            </div>
          </div>
        </div>

        <!-- 버튼 -->
        <div class="modal-actions" style="display: flex; gap: 8px; margin-top: 24px;">
          <!-- JS Injected -->
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Modal -->
  <div class="modal" id="profileModal">
    <div class="modal-content" style="max-width: 450px; padding: 32px; text-align: center;">
      <button class="modal-close" onclick="closeModal('profileModal')">×</button>

      <div
        style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), #a855f7); margin: 0 auto 24px; display: flex; align-items: center; justify-content: center; font-size: 40px; color: white; box-shadow: var(--shadow-glow);"
        id="profileLargeAvatar">👤</div>

      <h2 id="profileNickname" style="font-size: 28px; font-weight: 700; margin-bottom: 8px;">닉네임</h2>
      <p id="profileEmail" style="color: var(--text-secondary); margin-bottom: 32px;">email@example.com</p>

      <div
        style="background: var(--surface-color); padding: 20px; border-radius: 20px; text-align: left; margin-bottom: 32px; border: 1px solid rgba(0,0,0,0.05);">
        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
          <span style="color: var(--text-secondary); font-size: 14px;">회원 등급</span>
          <span style="font-weight: 600; color: var(--primary-color);">일반 회원</span>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <span style="color: var(--text-secondary); font-size: 14px;">매너 온도</span>
          <span style="font-weight: 600; color: #f59e0b;">36.5°C 🔥</span>
        </div>
      </div>

      <button class="btn btn-primary" style="width: 100%; padding: 14px;"
        onclick="closeModal('profileModal')">닫기</button>
    </div>
  </div>

  <div id="notificationContainer"></div>
  <!-- Firebase & App Logic -->
  <script type="module" src="app.js"></script>
</body>

</html>